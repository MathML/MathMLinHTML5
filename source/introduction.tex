\section{Introduction}

\subsection{Rationale for this Specification}

{\em This section is non-normative.}

The Mathematical Markup Language is the most popular XML format for describing
mathematical notation and capturing both its structure and content
\cite{MathML3} that has been integrated in various other standards such as
\cite{HTML5}, \cite{EPUB3}, \cite{ODF1} or \cite{Daisy3}. Although
the stated goal is ``to enable mathematics to be served, received, and
processed on the World Wide Web'', the MathML specification has
two serious shortcomings that make it hard to implement presentation MathML in
Web rendering engines:

\begin{enumerate}
\item {\em The MathML specification intentionally does not contain any detailed
  rendering rules}. As a consequence, the fact that Web rendering engines are
  compliant with the MathML specification does not necessarily mean that it
  will have the rendering quality expected by most readers.
  For example, the specification essentially just says that
  ``mfrac element is used for fractions'' and that the default medium
  linethickness ``is left up to the rendering agent'' \cite{MathML3}.
  As a comparison, to determine the exact spacing and thickness of
  fractions and stacks the
  \TeX Book's Appendix G \cite{TeXBook} relies
  on parameters $\sigma_8, \sigma_9, \xi_8, {3\xi_8}, {7\xi_8}, \sigma_{11}$ and
  $\sigma_{12}$ while the MATH table of \cite{OpenFontFormat3} extends these to
  parameters
  {\tt FractionNumeratorDisplayStyleShiftUp},
  {\tt FractionNumeratorShiftUp},
  {\tt FractionNumeratorDisplayStyleGapMin},
  {\tt FractionNumeratorGapMin},
  {\tt FractionRuleThickness},
  {\tt FractionDenominatorDisplayStyleGapMin},
  {\tt FractionDenominatorGapMin},
  {\tt FractionDenominatorDisplayStyleShiftDown},
  {\tt FractionDenominatorShiftDown},
  {\tt StackTopDisplayStyleShiftUp},
  {\tt StackTopShiftUp},
  {\tt StackDisplayStyleGapMin},
  {\tt StackGapMin},
  {\tt StackBottomDisplayStyleShiftDown} and
  {\tt StackBottomShiftDown}.
\item {\em The MathML specification is designed as an independent
  XML language and browser vendors have almost not been involved in the
  standardization process},
  except for integration in \cite{HTML5}.
  Instead, the specification is sometimes biased by MathML rendering and
  authoring tools behaving quite differently from Web rendering engines.
  Hence it is not always obvious whether all features are fundamental or
  whether they fit well into the Web rendering engine codebase.
  For example, the {\tt <mfenced>} element is just a
  ``convenient form in which to express common constructs involving fences''
  but is strictly equivalent to an expanded form with {\tt <mrow>} and
  {\tt <mo>} elements. It requires Web rendering engines
  to create many ``anonymous''
  rendering frames \& keep them up-to-date, to duplicate the logic
  for drawing and exposing the content of fenced expressions etc.
  Another example is the first cell in a
  {\tt <mlabeledtr>} row which is not necessarily positioned the same way as
  in HTML table and actually is supposed not to be involved in metric
  computation or border drawing of the table \cite{MathML3}.
\end{enumerate}

This ``MathML in HTML5'' specification intends to address these issues by being
as accurate as
possible on the visual rendering of mathematical formulas using additional
rules from the \TeX Book's Appendix G \cite{TeXBook} and from
the Open Font Format version 3 \cite{OpenFontFormat3}.
Focus has been put on keeping compatible with existing technologies of web
rendering engines \cite{HTML5} by relying as much as possible on CSS, text \&
table layout, box models and object-oriented programming.
As a consequence, parts of presentation MathML
that do not fit well in this framework or are rarely used in practice
have been ommited ; details on these and suggestions for standardization bodies
are provided in the Appendix.

Future versions of this specification may describe support for a larger subset
of presentation MathML by including features that are important in a Web context
(e.g. CSS-compatible line breaking).

\subsection{Terminology}

The key words MUST, MUST NOT, REQUIRED, SHALL, SHALL NOT, SHOULD, SHOULD NOT, RECOMMENDED, MAY, and OPTIONAL, are to be interpreted as described in \cite{IETF RFC 2119}.
