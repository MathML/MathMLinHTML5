\usepackage{amscd}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{enumerate}
\usepackage{fontspec}
\usepackage{fullpage}
\usepackage{hyperref}
\usepackage{listings}
\usepackage{xunicode}
\usepackage{latexml}

\usepackage{tikz}
\usetikzlibrary{fit}

% Define macros to avoid error when not using LaTeXML.
\providecommand{\lxAddClass}{}

\newcommand{\MathMLBox}[5]{
  \begin{scope}[shift={(#1,#2)},xscale=#3,yscale=#4,color=#5]
    \fill[color=#5!10]
         (0,-1.5) -- (5,-1.5) -- (5,1.5) -- (0,1.5) -- cycle;
    \draw (0,-2) -- (5,-2) -- (5,2) -- (0,2) -- cycle;
    \draw (0,0) -- (5,0);
  \end{scope}}

\newcommand{\MathMLBoxMetrics}[6]{
  \begin{scope}[shift={(#1,#2)},xscale=#3,yscale=#4,color=#5!50]
    \fill (0,0) node[style={shape=circle,fill=#5!50}] {};
    \draw (0,0) node[below right]{$(x_#6,y_#6)$};
    \draw[->] (0,-.5) -- (2,-.5) node[above]{$w_#6 = W_#6$} -- (5,-.5);
    \draw[->] (4.5, 0) -- (4.5,-1) node[left]{$A_#6$} -- (4.5,-1.5);
    \draw[->] (4.5, 0) -- (4.5, 1) node[left]{$B_#6$} -- (4.5,1.5);
    \draw[->] (3.5, 0) -- (3.5,-1.5) node[left]{$a_#6$} -- (3.5,-2);
    \draw[->] (3.5, 0) -- (3.5,1.5) node[left]{$b_#6$} -- (3.5,2);
  \end{scope}}

\lstset{basicstyle=\ttfamily}
